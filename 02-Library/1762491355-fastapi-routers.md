---
link: "[[1762394716-python-from-zero-for-backend|Quest: Python from Zero for Backend]]
aliases: 
  - "FastAPI Routers"
tags:
  - Knowledge
  - python
  - FastAPI
  - router
created_date:
  "[[2025-11-06]]"
---
# FastAPI Routers
## Summary
- **Routers** in FastAPI allow you to organize your API into multiple files and logical modules.  
- They help you **separate concerns**, **improve maintainability**, and **keep routes cleanly grouped** (e.g., `users`, `auth`, `items`).
- Instead of declaring all routes in `main.py`, you define smaller routers using `APIRouter()` and include them in the main app with `app.include_router()`.

## Key Ideas
### What is an APIRouter
- `APIRouter` is a class from `fastapi` used to define groups of related endpoints.
- It behaves like a mini FastAPI application with its own:
  - path operations (`@router.get`, `@router.post`, etc.)
  - dependencies
  - middleware
  - tags and prefixes

Example:
```python
from fastapi import APIRouter

router = APIRouter()

@router.get("/users")
def get_users():
    return [{"id": 1, "name": "Alice"}]

```

###  Why Use Routers
- Organization: Keep related routes together (users.py, items.py, auth.py).
- Scalability: Easier to maintain large codebases or teams.
- Reusability: Routers can be imported or reused across multiple FastAPI apps or microservices.
- Custom Configuration: You can apply specific tags, prefixes, and dependencies for each router.

### How to Include a Router
- In your main app file (main.py), import and include each router.

Example:
```python
from fastapi import FastAPI
from routers import users, items

app = FastAPI()

  app.include_router(users.router)
app.include_router(items.router)

```

### Router Prefixes
- You can add a prefix to all routes inside a router. This avoids repeating the same path multiple times.

Example:
```python
router = APIRouter(prefix="/users")

@router.get("/")
def list_users():
  return [{"id": 1, "name": "Alice"}]

```

Result: endpoint becomes `/users/` 

### Tags
- Tags group routes in the autogenerated API docs (/docs).

```python
router = APIRouter(prefix="/users", tags=["Users"])

```

This shows all user endpoints under a "Users" section in Swagger UI.

### Dependencies in Routers
- You can define dependencies that apply to every endpoint in a router.
- Useful for authentication, logging, or shared logic.

Example:
```python
from fastapi import Depends, APIRouter

def verify_token():
# example auth dependency
  pass

  router = APIRouter(prefix="/admin", dependencies=[Depends(verify_token)])

```

### Folder Structure Example
- Organizing routes in a modular project:

project/
├── main.py
├── routers/
│   ├── __init__.py
│   ├── users.py
│   ├── items.py
│   └── auth.py
├── models/
├── user.py
└── item.py

### Complete Example
```python {routers/users.py}
from fastapi import APIRouter

router = APIRouter(prefix="/users", tags=["Users"])

@router.get("/")
def list_users():
  return [{"id": 1, "name": "Alice"}]

  @router.post("/")
  def create_user(user: dict):
    return {"msg": "User created", "data": user}

```

```python {main.py}
from fastapi import FastAPI
from routers import users

app = FastAPI(title="Example API")

app.include_router(users.router)

```

Now:
- `GET /users/` -> list users
- `POST /users/` -> create user
- `/docs` shows a "Users" section.

### Summary of Benefits
| Feature   | Benefit    |
|--------------- | --------------- |
| prefix   | Avoids repeating common path segments   |
| tags   | Organizes API documentation   |
| dependencies   | Applies shared logic to a router group   |
| modulard design   | Clean, scalable code organization   |
| reusability   | Can import routers across projects   |


### Pro Tip
You can even **nest routers** (e.g., `/users/{id}/posts`) for hierarchical APIs by including one router inside another.

Example:
```python
users_router.include_router(posts_router, prefix="/{user_id}/posts")

```

### In short:
Routers are the backbone of scalable FastAPI apps — modularizing your API, keeping endpoints cleanly separated, and simplifying collaboration.

## Related Links
- [[]]

## Source
[APIRouter class - FastAPI](https://fastapi.tiangolo.com/reference/apirouter/#fastapi.APIRouter.get--example)

